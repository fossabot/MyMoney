/*!
 * MyMoney - search.min.js v.1.0
 * Copyright 2017 Edison Lee (MING-CHIEN LEE)
 */
var fdb=new ForerunnerDB,db=fdb.db("MyMoneyDB"),collection=db.collection("MyMoneyCollection");collection.load(),$("#submit").on("click",function(){var t=$("input[name='mode']:checked").val(),e="",d="";if("thisMonth"==t){var o=new Date,n=o.getUTCFullYear(),r=o.getUTCMonth()+1;r<=9&&(r="0"+r),e=n+"-"+r+"-01",d=n+"-"+r+"-31"}else"period"==t&&(e=$("#from").val(),d=$("#to").val());var a={"Food":0,"Clothing":0,"Transportation":0,"Entertainment":0},l=0,c=collection.find({date:{$gte:e,$lte:d}},{$orderBy:{date:1}});if($("tbody").html(""),0===c.length)$("tbody").append("<tr><td colspan='3' style='text-align:center'>No Data</td></tr>");else{for(var i=0;i<c.length;i++)$("#expenses tbody").append("<tr><td>"+c[i].date+"</td><td>"+c[i].name+"</td><td>"+c[i].price+"</td></tr>"),a[c[i].category]+=c[i].price/1,l+=c[i].price/1;for(key in a){var y=a[key];$("#category tbody").append("<tr><td>"+key+"</td><td>"+y+"</td><td>"+Math.round(y/l*100)+"%</td></tr>")}$("#category tbody").append("<tr><td colspan='3'>Total: "+l+"</td></tr>")}});